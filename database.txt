-- WARNING: This schema is for context only and is not meant to be run.
-- Table order and constraints may not be valid for execution.

CREATE TABLE public.brand (
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  name text,
  description text,
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  CONSTRAINT brand_pkey PRIMARY KEY (id)
);
CREATE TABLE public.input (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  input_date timestamp with time zone,
  notes text,
  status_id text DEFAULT gen_random_uuid(),
  supplier_id uuid DEFAULT gen_random_uuid(),
  CONSTRAINT input_pkey PRIMARY KEY (id),
  CONSTRAINT input_supplier_id_fkey FOREIGN KEY (supplier_id) REFERENCES public.supplier(id),
  CONSTRAINT input_status_fkey FOREIGN KEY (status_id) REFERENCES public.input_status(id)
);
CREATE TABLE public.input_info (
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  input_code uuid DEFAULT gen_random_uuid(),
  product_code uuid DEFAULT gen_random_uuid(),
  count smallint CHECK (count > 0),
  input_price bigint CHECK (input_price > 0),
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  input_id uuid,
  remaining_count bigint,
  CONSTRAINT input_info_pkey PRIMARY KEY (id),
  CONSTRAINT input_info_input_id_fkey FOREIGN KEY (input_id) REFERENCES public.input(id),
  CONSTRAINT input_info_product_code_fkey FOREIGN KEY (product_code) REFERENCES public.product_variants(id)
);
CREATE TABLE public.input_status (
  id text NOT NULL DEFAULT gen_random_uuid(),
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  name text,
  CONSTRAINT input_status_pkey PRIMARY KEY (id)
);
CREATE TABLE public.option_values (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  option_id uuid NOT NULL,
  name text,
  CONSTRAINT option_values_pkey PRIMARY KEY (id),
  CONSTRAINT option_values_option_id_fkey FOREIGN KEY (option_id) REFERENCES public.options(id)
);
CREATE TABLE public.options (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  name text UNIQUE,
  CONSTRAINT options_pkey PRIMARY KEY (id)
);
CREATE TABLE public.output (
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  customer_name text,
  emp_code uuid DEFAULT gen_random_uuid(),
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  status_id text DEFAULT gen_random_uuid(),
  notes text,
  CONSTRAINT output_pkey PRIMARY KEY (id),
  CONSTRAINT output_status_id_fkey1 FOREIGN KEY (status_id) REFERENCES public.output_status(id)
);
CREATE TABLE public.output_info (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  product_id uuid DEFAULT gen_random_uuid(),
  count smallint,
  output_id uuid DEFAULT gen_random_uuid(),
  price bigint,
  cost_price bigint,
  CONSTRAINT output_info_pkey PRIMARY KEY (id),
  CONSTRAINT output_info_output_id_fkey FOREIGN KEY (output_id) REFERENCES public.output(id),
  CONSTRAINT output_info_product_id_fkey FOREIGN KEY (product_id) REFERENCES public.product_variants(id)
);
CREATE TABLE public.output_status (
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  name text,
  id text NOT NULL DEFAULT gen_random_uuid(),
  CONSTRAINT output_status_pkey PRIMARY KEY (id)
);
CREATE TABLE public.product (
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  name text,
  category_id uuid DEFAULT gen_random_uuid(),
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  status_id text DEFAULT gen_random_uuid(),
  brand_id uuid,
  weight numeric,
  dimensions text,
  wheelbase numeric,
  seat_height numeric,
  ground_clearance numeric,
  fuel_capacity numeric,
  tire_size text,
  front_suspension text,
  rear_suspension text,
  engine_type text,
  max_power text,
  oil_capacity numeric,
  fuel_consumption text,
  transmission_type text,
  starter_system text,
  max_torque text,
  displacement numeric,
  bore_stroke text,
  compression_ratio text,
  description text,
  CONSTRAINT product_pkey PRIMARY KEY (id),
  CONSTRAINT product_category_id_fkey FOREIGN KEY (category_id) REFERENCES public.product_category(id),
  CONSTRAINT product_brand_id_fkey FOREIGN KEY (brand_id) REFERENCES public.brand(id),
  CONSTRAINT product_status_id_fkey FOREIGN KEY (status_id) REFERENCES public.product_status(id)
);
CREATE TABLE public.product_category (
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  name text,
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  description text,
  CONSTRAINT product_category_pkey PRIMARY KEY (id)
);
CREATE TABLE public.product_collection_photo (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  product_variant_id uuid NOT NULL DEFAULT gen_random_uuid(),
  url_image text,
  CONSTRAINT product_collection_photo_pkey PRIMARY KEY (id),
  CONSTRAINT product_collection_photo_product_variant_id_fkey FOREIGN KEY (product_variant_id) REFERENCES public.product_variants(id)
);
CREATE TABLE public.product_status (
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  name text,
  id text NOT NULL DEFAULT gen_random_uuid(),
  CONSTRAINT product_status_pkey PRIMARY KEY (id)
);
CREATE TABLE public.product_variants (
  id uuid NOT NULL,
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  product_id uuid DEFAULT gen_random_uuid(),
  url text,
  price bigint,
  cover_image_url text,
  marked_for_deletion boolean DEFAULT false,
  CONSTRAINT product_variants_pkey PRIMARY KEY (id),
  CONSTRAINT product_variants_product_id_fkey FOREIGN KEY (product_id) REFERENCES public.product(id)
);
CREATE TABLE public.settings (
  key text NOT NULL,
  value bigint NOT NULL,
  CONSTRAINT settings_pkey PRIMARY KEY (key)
);
CREATE TABLE public.supplier (
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  name text,
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  phone text,
  email text,
  status_id text,
  notes text,
  address text,
  deleted_at timestamp with time zone,
  CONSTRAINT supplier_pkey PRIMARY KEY (id),
  CONSTRAINT supplier_status_id_fkey FOREIGN KEY (status_id) REFERENCES public.supplier_status(id)
);
CREATE TABLE public.supplier_status (
  id text NOT NULL,
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  name text,
  CONSTRAINT supplier_status_pkey PRIMARY KEY (id)
);
CREATE TABLE public.variant_option_values (
  variant_id uuid NOT NULL,
  option_value_id uuid NOT NULL,
  CONSTRAINT variant_option_values_pkey PRIMARY KEY (variant_id, option_value_id),
  CONSTRAINT variant_option_values_variant_id_fkey FOREIGN KEY (variant_id) REFERENCES public.product_variants(id),
  CONSTRAINT variant_option_values_option_value_id_fkey FOREIGN KEY (option_value_id) REFERENCES public.option_values(id)
);